<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/perfil.css">
    <title>Document</title>
</head>
<body>
    <header class="header">
        <h1>How to English</h1>
        <p>O seu caminho para a fluência</p>
        <div class="nav">
            <a href="./index.html">Home</a>
            <a href="./contact.html">Contact us</a>
            <a href="./cadastro.html">Sign up</a>
            <a href="./aboutus.html">About Us</a>
            <a href="./perfil.html">Profile</a>
            <a href="./quest.html">Quest</a>
        </div>
    </header>

    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>

    <div class="contato">
        <h1>Perfil</h1>
        <div class="formulario">
            <button id="btnMostrar" onclick="mostrarExclusao()">Excluir perfil</button>
        </div>
    </div>

    <div class="contato2" id="exclusao">
        <div class="formulario">
            <h1>Você tem certeza?</h1>
            <div class="btnForm">
                <input type="text" id="usernameInput" placeholder="Username">
                <button onclick="confirmarExclusao()">Confirmar</button>
                <button id="btnSumir" onclick="sumirExclusao()">Voltar</button>
            </div>
        </div>
    </div>

    <script>
        var formExclusao = document.getElementById("exclusao");
        formExclusao.style.display = "none";

        function sumirExclusao(){
            formExclusao.style.display = "none";
        }

        function mostrarExclusao(){
            formExclusao.style.display = "block";
        }

        function confirmarExclusao(){
            // Get the username from an input field
            var nomeUsuario = document.getElementById("usernameInput").value;

            const request = new Request(
                `http://localhost:3000/api/cadastro/` + nomeUsuario,
                {
                    method: 'DELETE'
                }
            );

            fetch(request)
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                })
                .catch(error => {
                    console.error('Erro durante a exclusão:', error);
                });

            // Oculta o formulário de confirmação após a exclusão
            formExclusao.style.display = "none";
        }
    </script>
</body>
</html>
